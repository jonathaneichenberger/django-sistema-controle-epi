<!-- filepath: c:\Users\pc-jonathan\Desktop\github\senai-imersao-sabadou\core\templates\core\pages\entregas.html -->
{% extends 'core/base.html' %} 
{% load static %} 

{% block title %}
    Entregas
{% endblock %} 
{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/entregas.css' %}" />
{% endblock %} 

{% block content %}
<h2 class="page-title">Registrar Entrega de EPI</h2>
<form method="post" class="form-entrega">
  {% csrf_token %}
  <div class="form-group">
    <label for="usuario">Usuário:</label>
    <select id="usuario" name="usuario" required>
      <option value="">Selecione</option>
      {% for usuario in usuarios %}
      <option value="{{ usuario.id }}">{{ usuario.nome }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="form-group">
    <label for="epi">EPI:</label>
    <select id="epi" name="epi" required>
      <option value="">Selecione</option>
      {% for epi in epis %}
      <option value="{{ epi.id }}">{{ epi.nome }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="form-group">
    <label for="data_entrega">Data da Entrega:</label>
    <input type="date" id="data_entrega" name="data_entrega" required />
  </div>
  <button type="submit" class="btn-entrega">Registrar Entrega</button>
</form>
<hr />
<h3>Histórico de Entregas</h3>
<table class="table-entregas">
  <thead>
    <tr>
      <th>Usuário</th>
      <th>EPI</th>
      <th>Data</th>
      <th>Ações</th>
    </tr>
  </thead>
  <tbody>
    {% for entrega in entregas %}
    <tr>
      <td>{{ entrega.usuario.nome }}</td>
      <td>{{ entrega.epi.nome }}</td>
      <td>{{ entrega.data_entrega }}</td>
      <td>
        <a href="#" class="btn-table delete">Excluir</a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="4">Nenhuma entrega registrada.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
